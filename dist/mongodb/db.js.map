{"version":3,"sources":["../../src/mongodb/db.js"],"names":["Promise","conn","createConnection","db","module","exports","formStructure","Schema","collection","strict","timestamps","formData","form","model","form_data","req","res","next"],"mappings":";;AAAA;;;;AACA;;;;AAEA;;;;;;AADA,mBAASA,OAAT;;;AAGA,IAAIC,OAAO,mBAASC,gBAAT,CAA0B,sBAAYC,EAAtC,CAAX;;AAEA;AACAC,OAAOC,OAAP,GAAiB,YAAW;;AAExB;AACA,QAAIC,gBAAgB,mBAASC,MAAT,CAAgB,EAAhB,EAAoB;AACpCC,oBAAY,eADwB;AAEpCC,gBAAQ,KAF4B;AAGpCC,oBAAY;AAHwB,KAApB,CAApB;;AAMA,QAAIC,WAAW,mBAASJ,MAAT,CAAgB,EAAhB,EAAoB;AAC/BC,oBAAY,UADmB;AAE/BC,gBAAQ,KAFuB;AAG/BC,oBAAY;AAHmB,KAApB,CAAf;;AAMA,QAAIE,OAAOX,KAAKY,KAAL,CAAW,WAAX,EAAwBP,aAAxB,CAAX;AACA,QAAIQ,YAAYb,KAAKY,KAAL,CAAW,UAAX,EAAuBF,QAAvB,CAAhB;AACA,WAAO,UAASI,GAAT,EAAcC,GAAd,EAAmBC,IAAnB,EAAyB;AAC5BF,YAAIT,aAAJ,GAAoBM,IAApB;AACAG,YAAIJ,QAAJ,GAAeG,SAAf;AACAG;AACH,KAJD;AAKH,CAtBD","file":"db.js","sourcesContent":["import mongoose from \"mongoose\";\nimport bluebird from 'bluebird';\nmongoose.Promise = bluebird;\nimport environment from \"../environment.js\";\n\nlet conn = mongoose.createConnection(environment.db)\n\n// the middleware function\nmodule.exports = function() {\n\n    // create schema\n    let formStructure = mongoose.Schema({}, {\n        collection: \"formStructure\",\n        strict: false,\n        timestamps: true\n    });\n\n    let formData = mongoose.Schema({}, {\n        collection: \"formData\",\n        strict: false,\n        timestamps: true\n    })\n\n    let form = conn.model(\"STRUCTURE\", formStructure);\n    let form_data = conn.model(\"FORMDATA\", formData)\n    return function(req, res, next) {\n        req.formStructure = form;\n        req.formData = form_data;\n        next();\n    };\n};"]}